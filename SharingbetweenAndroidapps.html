<html><head><title>Sharing between Android apps</title><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=lK6TqNaRCmA0q0xCQYvSyA');ol{margin:0;padding:0}.c4{max-width:554.4pt;background-color:#ffffff;padding:28.8pt 28.8pt 28.8pt 28.8pt}.c3{color:inherit;text-decoration:inherit}.c2{color:#1155cc;text-decoration:underline}.c1{height:11pt}.c0{direction:ltr}.c5{margin-left:36pt}.title{padding-top:24pt;line-height:1.15;text-align:left;color:#000000;font-size:36pt;font-family:"Arial";font-weight:bold;padding-bottom:6pt}.subtitle{padding-top:18pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:24pt;font-family:"Georgia";padding-bottom:4pt}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:24pt;line-height:1.15;text-align:left;color:#000000;font-size:18pt;font-family:"Arial";font-weight:bold;padding-bottom:6pt}h2{padding-top:18pt;line-height:1.15;text-align:left;color:#000000;font-size:14pt;font-family:"Arial";font-weight:bold;padding-bottom:4pt}h3{padding-top:14pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Arial";font-weight:bold;padding-bottom:4pt}h4{padding-top:12pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Arial";padding-bottom:2pt}h5{padding-top:11pt;line-height:1.15;text-align:left;color:#666666;font-size:10pt;font-family:"Arial";font-weight:bold;padding-bottom:2pt}h6{padding-top:10pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:10pt;font-family:"Arial";padding-bottom:2pt}</style></head><body class="c4"><h2 class="c0"><a name="h.fbqwzgoa5aqn"></a><span>Getting another app to do work for you</span></h2><p class="c1 c0"><span></span></p><p class="c0"><span>The primary method is to launch an Activity from another app.</span></p><p class="c0"><span>It&rsquo;s much like launching another Activity in your own app -- request it with an Intent.</span></p><p class="c1 c0"><span></span></p><p class="c0"><span>The other Activity supplants yours, shows its own View -- ok as screen is too small to share.</span></p><p class="c0"><span>If you do want to make it look like the new app and your app are both up at the same time, try tabs:</span></p><p class="c0"><span>http://stackoverflow.com/questions/1306689/launching-activities-within-a-tab-in-android</span></p><p class="c1 c0"><span></span></p><p class="c0"><span>Use an explicit Intent to get a specific Activity, implicit to allow any app to service the request.</span></p><p class="c0"><span>Why isn&rsquo;t this a security breach? &nbsp;It&rsquo;s regarded as ok since the user installed that other app.</span></p><p class="c1 c0"><span></span></p><p class="c0"><span>Implicit Intents just say what you want done, by specifying an action and any needed data.</span></p><p class="c0"><span>Many actions are generic, e.g. Intent.ACTION_EDIT -- how does the system know which sort of edit you mean?</span></p><p class="c0"><span>It distinguishes by the type of data you supply, and by additional parameters category and type.</span></p><p class="c0"><span>This example calls Maps -- ACTION_VIEW is used by many apps, but the geo: URI is matched by Maps.</span></p><p class="c0 c5"><span>Uri location = Uri.parse(&quot;geo:0,0?q=Espresso+Vivace+Alley+24,+Seattle,+WA&quot;);</span></p><p class="c0 c5"><span>Intent mapIntent = new Intent(Intent.ACTION_VIEW, location);</span></p><p class="c0"><span>Not all Intents need all types of data. &nbsp;See uses of calendar (no URI) and email (constant URI) here:</span></p><p class="c0"><span class="c2"><a class="c3" href="http://developer.android.com/training/basics/intents/sending.html#Build">http://developer.android.com/training/basics/intents/sending.html#Build</a></span></p><p class="c0"><span>If more than one other app matches, the system will let the user choose among them.</span></p><p class="c0 c1"><span></span></p><p class="c0"><span>If the the other app doesn&rsquo;t need to return data to yours, just launch it with startActivity.</span></p><p class="c0"><span>If you do need data back, use startActivityForResult. &nbsp;This does not wait for the other app to return.</span></p><p class="c0"><span>Instead, you receive data via a callback that you define, onActivityResult.</span></p><p class="c0"><span>Besides the Intent, you give startActivityForResult a code that you can use to identify the result when it comes back. &nbsp;If your app calls multiple other Activitys, you can use this code to distinguish which result you&rsquo;ve received.</span></p><p class="c1 c0"><span></span></p><p class="c0"><span>When the other app exits, if your app is still on the top of the app stack, it will be brought to the front again.</span></p><p class="c0"><span>That will cause your Activity&rsquo;s onCreate to be called again.</span></p><h2 class="c0"><a name="h.lzl7uzcf0be3"></a><span>Doing work for other apps</span></h2><p class="c1 c0"><span></span></p><p class="c0"><span>This is the same as interacting with another Activity in your own app, except that you&rsquo;ll need to define an &lt;intent-filter&gt; in your &lt;activity&gt; record in the manifest. &nbsp;This lets the system match what you provide against what other apps request. &nbsp;Your manifest is scraped for &lt;intent-filter&gt;s when the app is installed.</span></p><p class="c1 c0"><span></span></p><p class="c0"><span>If you&rsquo;re providing an Activity, and can&rsquo;t find a suitable pre-defined action for it, this one is generic:</span></p><p class="c0"><span class="c2"><a class="c3" href="http://developer.android.com/reference/android/content/Intent.html#ACTION_RUN">http://developer.android.com/reference/android/content/Intent.html#ACTION_RUN</a></span></p><p class="c0"><span>Note there may be some risk of the system thinking you want the test harness, which uses that action. &nbsp;If so, try this with a custom URI scheme (see next).</span></p><p class="c1 c0"><span></span></p><p class="c0"><span>You can also define your own action names -- they&rsquo;re just text strings. &nbsp;Include your package name as a prefix.</span></p><p class="c0"><span>This defines both a custom action and a custom URI scheme name for the Intent&rsquo;s data.</span></p><p class="c0"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;intent-filter&gt;</span></p><p class="c0"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;action android:name=&quot;org.seadroid.CHOOSE_COLOR&quot; /&gt;</span></p><p class="c0"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;</span></p><p class="c0"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;data android:scheme=&quot;color&quot; /&gt;</span></p><p class="c0"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/intent-filter&gt;</span></p><h2 class="c0"><a name="h.vvbks8nv1agd"></a><span>References:</span></h2><p class="c1 c0"><span></span></p><p class="c0"><span>Review the tutorial on launching another Activity in your app:</span></p><p class="c0"><span class="c2"><a class="c3" href="http://developer.android.com/training/basics/firstapp/starting-activity.html">http://developer.android.com/training/basics/firstapp/starting-activity.html</a></span></p><p class="c0"><span>New tutorial on calling another app&rsquo;s Activity or allowing your Activity to be called:</span></p><p class="c0"><span class="c2"><a class="c3" href="http://developer.android.com/training/basics/intents/index.html">http://developer.android.com/training/basics/intents/index.html</a></span></p><p class="c0"><span class="c2"><a class="c3" href="http://developer.android.com/training/basics/intents/sending.html">http://developer.android.com/training/basics/intents/sending.html</a></span></p><p class="c0"><span>How to specify an Intent:</span></p><p class="c0"><span class="c2"><a class="c3" href="http://developer.android.com/guide/topics/intents/intents-filters.html">http://developer.android.com/guide/topics/intents/intents-filters.html</a></span></p><p class="c0"><span>The &ldquo;capturing photos&rdquo; tutorial shows using the Camera app -- good example of receiving data back from the app.</span></p><p class="c0"><span class="c2"><a class="c3" href="http://developer.android.com/training/camera/photobasics.html">http://developer.android.com/training/camera/photobasics.html</a></span></p><h2 class="c0"><a name="h.ouy7t0wb2yeh"></a><span>What apps are available to borrow an Activity from?</span></h2><p class="c1 c0"><span></span></p><p class="c0"><span>System apps shipped with Android are good options -- safe and likely to be present.</span></p><p class="c0"><span>The &ldquo;sending&rdquo; tutorial (above) shows use of Maps, Phone, Calendar.</span></p><p class="c0"><span>The &ldquo;capturing photos&rdquo; tutorial shows using the Camera app:</span></p><p class="c0"><span class="c2"><a class="c3" href="http://developer.android.com/training/camera/photobasics.html">http://developer.android.com/training/camera/photobasics.html</a></span></p><p class="c0"><span>Intent parameters to invoke a few common system apps:</span></p><p class="c0"><span class="c2"><a class="c3" href="http://developer.android.com/guide/appendix/g-app-intents.html">http://developer.android.com/guide/appendix/g-app-intents.html</a></span></p><p class="c1 c0"><span></span></p><p class="c0"><span>To find more, can look at the app source -- l</span><span>ook at the &lt;intent-filter&gt; in the manifest in each app to see what action / category / type will match.</span></p><p class="c0"><span>Android system apps are mirrored on Github, along with the Android source:</span></p><p class="c0"><span class="c2"><a class="c3" href="https://github.com/android">https://github.com/android</a></span></p><p class="c0"><span>Can browse the code there or fork / clone it.</span></p><p class="c0"><span>In &ldquo;Public Repositories&rdquo; search for platform_packages_apps -- will filter the list of Android repos.</span></p><p class="c0"><span>These may also serve as examples for writing apps that can provide an Activity.</span></p><p class="c1 c0"><span></span></p><p class="c0"><span>Registry for apps that share Intents:</span></p><p class="c0"><span class="c2"><a class="c3" href="http://www.openintents.org/">http://www.openintents.org/</a></span></p><p class="c0"><span class="c2"><a class="c3" href="http://www.openintents.org/en/intentstable">http://www.openintents.org/en/intentstable</a></span></p><h2 class="c0"><a name="h.rql0saobsed"></a><span>Got favorite callable apps? &nbsp;</span></h2><p class="c1 c0"><span></span></p><p class="c0"><span>My favorite is ZXing (Zebra Crossing) -- 1D &amp; 2D barcode scanner.</span></p><p class="c0"><span>Use this to scan QR codes, for instance.</span></p><p class="c0"><span>http://code.google.com/p/zxing/wiki/ScanningViaIntent</span></p></body></html>